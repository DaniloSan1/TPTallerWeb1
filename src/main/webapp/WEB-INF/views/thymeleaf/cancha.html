<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
  <head>
    <meta charset="UTF-8" />
    <title>Detalle de Cancha</title>
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css"
      rel="stylesheet"
    />
    <link rel="stylesheet" th:href="@{/css/main.css}" />
  </head>
  <body class="bg-light">
    <!-- Include the navbar fragment -->
    <div th:replace="~{fragments/navbar :: navbar}"></div>

    <div class="container" style="padding-top: 135px">
      <div
        th:if="${error != null && cancha == null}"
        class="alert alert-danger text-center"
      >
        <h4 th:text="${error}">La cancha solicitada no existe.</h4>
        <a th:href="@{/canchas-disponibles}" class="btn btn-secondary mt-3"
          >Volver a la lista de canchas</a
        >
      </div>

      <div
        th:if="${cancha}"
        class="card shadow-lg mx-auto"
        style="max-width: 600px"
      >
        <div class="card-body">
          <h1 class="card-title text-center mb-4" th:text="${cancha.nombre}">
            Nombre Cancha
          </h1>
          <iframe
            id="map-iframe"
            frameborder="0"
            allowfullscreen
            th:if="${cancha != null}"
            th:src="'https://www.google.com/maps/embed/v1/place?key=AIzaSyCB2Jsk_wlMEsQ5phtgegFGXuNTlHB7YNY&q=' + ${#strings.replace(cancha.direccion, ' ', '+')}"
          ></iframe>

          <ul class="list-group list-group-flush mb-4">
            <li class="list-group-item">
              <strong>Dirección:</strong>
              <span th:text="${cancha.direccion}">Dirección</span>
            </li>
            <li class="list-group-item">
              <strong>Capacidad:</strong>
              <span th:text="${cancha.capacidad}">Capacidad</span>
            </li>
            <li class="list-group-item">
              <strong>Tipo de Suelo:</strong>
              <span th:text="${cancha.tipoSuelo}">Tipo Suelo</span>
            </li>
            <li class="list-group-item">
              <strong>Zona:</strong> <span th:text="${cancha.zona}">Zona</span>
            </li>
            <li class="list-group-item">
              <strong>Precio por hora:</strong> $<span
                th:text="${cancha.precio}"
                >Precio</span
              >
            </li>
          </ul>

          <div class="mb-4">
            <h5>Horarios disponibles:</h5>
            <div th:if="${#lists.isEmpty(horarios)}" class="text-muted">
              No hay horarios disponibles.
            </div>
            <div class="list-group" th:if="${!#lists.isEmpty(horarios)}">
              <div
                th:each="horario : ${horarios}"
                class="list-group-item d-flex justify-content-between align-items-center"
              >
                <div>
                  <strong th:text="${horario.diaSemana}">Dia: </strong>:
                  <span th:text="${horario.horaInicio}">Hora de inicio</span> -
                  <span th:text="${horario.horaFin}">Hora de fin</span>
                </div>
                <div>
                  <button
                    th:if="${horario.disponible}"
                    class="btn btn-success btn-sm"
                    th:onclick="'location.href=\'/spring/reserva/nueva?usuarioId=' + ${usuarioId} + '&horarioId=' + ${horario.id} + '\';'"
                  >
                    Reservar
                  </button>
                  <button
                    th:if="${!horario.disponible}"
                    class="btn btn-secondary btn-sm"
                    disabled
                  >
                    No disponible
                  </button>
                </div>
              </div>
            </div>
          </div>

          <div class="text-center mt-4">
            <a th:href="@{/canchas-disponibles}" class="btn btn-primary"
              >Volver a la lista de canchas</a
            >
          </div>
        </div>
      </div>
    </div>
  </body>
</html>
