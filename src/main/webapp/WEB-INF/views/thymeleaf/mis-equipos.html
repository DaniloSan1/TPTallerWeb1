<!DOCTYPE html>
<html lang="es" xmlns:th="http://www.thymeleaf.org">
    <head>
        <meta charset="utf-8" />
        <meta
            name="viewport"
            content="width=device-width, initial-scale=1, shrink-to-fit=no"
        />

        <title>Mis Equipos - Partidazo</title>

        <link
            rel="stylesheet"
            th:href="@{/webjars/bootstrap/5.2.0/css/bootstrap.min.css}"
        />
        <link rel="stylesheet" th:href="@{/css/main.css}" />
        <link
            rel="stylesheet"
            href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@20..48,100..700,0..1,-50..200&icon_names=person"
        />
    </head>

    <body>
        <!-- Include the navbar fragment -->
        <div th:replace="~{fragments/navbar :: navbar}"></div>

        <main
            role="main"
            class="container"
            style="
                padding-top: 135px;
                height: 100vh;
                display: flex;
                flex-direction: column;
            "
        >
            <div class="container card">
                <div
                    class="d-flex align-items-center justify-content-between mb-3 card-header"
                >
                    <h1 class="mb-2">Mis Equipos</h1>
                </div>

                <form th:action="@{/equipos/mis-equipos}" method="get">
                    <div
                        class="input-group mb-3 shadow-sm rounded-pill overflow-hidden"
                    >
                        <input
                            type="text"
                            name="busqueda"
                            class="form-control border-0"
                            placeholder="Buscar por nombre de equipo..."
                            th:value="${busqueda}"
                            aria-label="Buscar equipo"
                        />
                        <button class="btn btn-primary px-4" type="submit">
                            <i class="bi bi-search"></i> Buscar
                        </button>
                    </div>
                </form>

                <!-- Contenedor scrollable para las tarjetas -->
                <div style="flex: 1; overflow-y: auto; padding: 1rem">
                    <!-- Estado vacío -->
                    <div
                        class="alert alert-info"
                        role="alert"
                        th:if="${#lists.isEmpty(equipos)}"
                    >
                        No perteneces a ningún equipo por el momento.
                    </div>
                    <!-- Grilla de tarjetas -->
                    <div class="row g-3" th:if="${!#lists.isEmpty(equipos)}">
                        <div
                            class="col-12 col-sm-6 col-lg-4"
                            th:each="equipo, iterStat : ${equipos}"
                        >
                            <a
                                th:href="@{/equipos/{id}(id=${equipo.id})}"
                                class="text-decoration-none"
                            >
                                <div class="card h-100 shadow-sm">
                                    <div class="card-body d-flex flex-column">
                                        <h5
                                            class="card-title"
                                            th:text="${equipo.nombre}"
                                        >
                                            Nombre del Equipo
                                        </h5>
                                        <p class="card-text text-muted">
                                            Creado por:
                                            <span
                                                th:text="${equipo.creadoPor.nombre}"
                                            ></span>
                                        </p>
                                        <p class="card-text text-muted">
                                            Fecha de creación:
                                            <span
                                                th:if="${equipo.fechaCreacion != null}"
                                                th:text="${equipo.fechaCreacion}"
                                            ></span>
                                            <span
                                                th:if="${equipo.fechaCreacion == null}"
                                                >Fecha no disponible</span
                                            >
                                        </p>
                                    </div>
                                </div>
                            </a>
                        </div>
                    </div>
                </div>
            </div>
        </main>

        <script
            th:src="@{/webjars/bootstrap/5.2.0/js/bootstrap.bundle.min.js}"
        ></script>
    </body>
</html>
