<!DOCTYPE html>
<html lang="es" xmlns:th="http://www.thymeleaf.org">
  <head>
    <meta charset="utf-8" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1, shrink-to-fit=no"
    />

    <title>Partidazo</title>

    <link
      rel="stylesheet"
      th:href="@{/webjars/bootstrap/5.2.0/css/bootstrap.min.css}"
    />
    <link rel="stylesheet" th:href="@{/css/main.css}" />
  </head>

  <body>
    <!-- Include the navbar fragment -->
    <div th:replace="~{fragments/navbar :: navbar}"></div>

    <main role="main" class="container" style="padding-top: 175px">
      <div
        th:if="${error != null && partido == null}"
        class="error"
        th:text="${error}"
      ></div>
      <div th:unless="${partido}" class="no-match"></div>

      <div
        class="container d-flex flex-column justify-content-center width-100"
      >
        <div
          th:if="${partido != null}"
          id="loginbox"
          style="margin-top: 50px"
          class="mainbox width-100"
        >
          <div class="d-flex align-items-center justify-content-between mb-4">
            <div class="d-flex justify-content-between align-items-start">
              <div
                class="d-flex align-items-center justify-content-between gap-3"
              >
                <h3 th:text="${partido.titulo}"></h3>
                <div class="d-flex align-items-center g-3">
                  <span class="chip chip-zona" th:text="${partido.zona}"></span>
                  <span
                    class="chip chip-nivel"
                    th:text="${partido.nivel}"
                  ></span>
                </div>
              </div>
            </div>
            <h3 th:text="${partido.fecha}"></h3>
          </div>
          <hr class="colorgraph" />
        </div>
        <div
          class="d-flex flex-row align-items-start justify-content-between g-3"
        >
          <img th:src="@{/assets/map.svg}" alt="map" class="w-75 p-4" />
          <div class="w-25">
            <br />
            <div
              th:if="${partido != null}"
              style="max-height: 585px; height: 100vh"
              class="d-flex flex-column justify-content-between"
            >
              <div>
                <p>
                  <strong>Cupo máximo:</strong>
                  <span th:text="${partido.cupoMaximo}"></span>
                </p>
                <p>
                  <strong>Cancha:</strong>
                  <span th:text="${partido.cancha}"></span>
                </p>
                <p>
                  <strong>Creador:</strong>
                  <span th:text="${partido.creador}"></span>
                </p>
                <p>
                  <strong>Descripción:</strong>
                </p>
                <p th:text="${partido.descripcion}"></p>
              </div>
              <div>
                <button
                  id="btn-unirse"
                  class="btn btn-lg btn-primary btn-block"
                  th:if="${!partido.yaParticipa}"
                  th:disabled="${!partido.hayCupo || partido.yaParticipa}"
                  th:onclick="|unirseAPartido(${partido.id})|"
                >
                  Unirse
                </button>
                <form
                  th:action="@{/partido/{id}/abandonar(id=${partido.id})}"
                  method="post"
                >
                  <button
                    type="submit"
                    class="btn btn-lg btn-danger btn-block"
                    th:if="${partido.yaParticipa}"
                  >
                    Abandonar partido
                  </button>
                </form>
              </div>
            </div>
            <div th:if="${partido == null}">
              <p th:text="${error}"></p>
            </div>
          </div>
        </div>
      </div>
    </main>
    <script
      type="text/javascript"
      th:src="@{/webjars/bootstrap/5.2.0/js/bootstrap.min.js}"
    ></script>
    <script type="module" th:src="@{/js/detalle_partido.js}"></script>
  </body>
</html>
